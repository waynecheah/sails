define(["require","module"],function(){function f(a,b,c){if(0===a.indexOf("data:"))return a;if(a=d(a),a.match(/^\//)||a.match(e))return a;var f=c.match(e),i=b.match(e);return!i||f&&f[1]==i[1]&&f[2]==i[2]?h(g(a,b),c):g(a,b)}function g(a,b){"./"==a.substr(0,2)&&(a=a.substr(2));var c=b.split("/"),d=a.split("/");for(c.pop();curPart=d.shift();)".."==curPart?c.pop():c.push(curPart);return c.join("/")}function h(a,b){var c=b.split("/");for(c.pop(),b=c.join("/")+"/",i=0;b.substr(i,1)==a.substr(i,1);)i++;for(;"/"!=b.substr(i,1);)i--;b=b.substr(i+1),a=a.substr(i+1),c=b.split("/");var d=a.split("/");for(out="";c.shift();)out+="../";for(;curPart=d.shift();)out+=curPart+"/";return out.substr(0,out.length-1)}var c=/([^:])\/+/g,d=function(a){return a.replace(c,"$1/")},e=/[^\:\/]*:\/\/([^\/])*/,j=function(a,b,c,e){b=d(b),c=d(c);for(var h,i,a,g=/@import\s*("([^"]*)"|'([^']*)')|url\s*\(\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/gi;h=g.exec(a);){i=h[3]||h[2]||h[5]||h[6]||h[4];var j;j=e&&"/"==i.substr(0,1)?e+i:f(i,b,c);var k=h[5]||h[6]?1:0;a=a.substr(0,g.lastIndex-i.length-k-1)+j+a.substr(g.lastIndex-k-1),g.lastIndex=g.lastIndex+(j.length-i.length)}return a};return j.convertURIBase=f,j});